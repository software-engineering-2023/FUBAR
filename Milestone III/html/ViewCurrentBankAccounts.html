<!DOCTYPE html>
<html>
<head>
    <title>Bank Accounts | Online Banking</title>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Urbanist:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="../css/ViewCurrentBankAccounts.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" /> 
</head>
<body>
    <div class="navbar">
        <div class="logo">
            <img src="../img/FUBAR Logo.png" />
        </div>
        <ul>
            <li><button id="home" class="home">Home</button></li>
            <li><button id="report">Report Issue</button></li>
            <li><button id="notifs">Notifications</button></li>
            <li><button id="reminders">Reminders</button></li>
            <li><button id="contact">Contact</button></li>
        </ul>
    </div>

    <div class="BankAccounts-page">
        <a href="#" onclick="history.back()" class="back-link">
            <i class="fas fa-arrow-left"></i>
            Back
        </a>
        <div class="Bank-container">
            <h1>Here are your current bank accounts, Dareen!</h1>
        </div>
    </div>

    <table>
        <thead>
            <tr>
                <th>Account Number</th>
                <th>Balance</th>
                <th>Currency</th>
                <th></th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>123456789</td>
                <td id="bank1">500000</td>
                <td>EGP</td>
                <td><button class="view-transactions-button" id="VTButton">View Transactions</button></td>
                <td><button class="close-account-button" onclick="openClosureForm(this)">Close Bank Account</button></td>
            </tr>
            <tr>
                <td>987654321</td>
                <td id="bank2">250000</td>
                <td>USD</td>
                <td><button class="view-transactions-button">View Transactions</button></td>
                <td><button class="close-account-button" onclick="openClosureForm(this)">Close Bank Account</button></td>
            </tr>
        </tbody>
    </table>

    <div id="closureForm" class="modal">
        <div class="modal-content">
            <span class="close-icon" onclick="closeClosureForm()">&#10005;</span>
            <form id="closureFormContent">
                <h2>Bank Account Closure Form</h2>

                <label for="accountNumber">Account Number:</label>
                <input type="text" id="accountNumber" name="accountNumber" disabled>

                <label for="reason">Reason for Closure:</label>
                <textarea id="reason" name="reason" required></textarea>

                <div class="button-wrapper">
                    <button type="button" onclick="confirmClosure()">Send Request</button>
                    <button type="button" onclick="closeClosureForm()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <script src="../js/script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const VTButton = document.getElementById('VTButton');
            if (VTButton) {
                VTButton.addEventListener('click', function () {
                    window.location.href = 'ViewTransactionsInBA.html';
                });
            }
        });

        function openClosureForm(button) {
            var closureForm = document.getElementById("closureForm");
            closureForm.style.display = "block";

            var accountNumber = document.getElementById("accountNumber");
            accountNumber.value = button.parentNode.parentNode.children[0].innerText;
        }

        function closeClosureForm() {
            var closureForm = document.getElementById("closureForm");
            closureForm.style.display = "none";
        }

        function confirmClosure() {
            var reason = document.getElementById("reason");

            if (reason.checkValidity()) {
                if (confirm("Are you sure you want to request to close this bank account?")) {
                    alert("Your request is being processed. We'll get back to you shortly.");
                    closeClosureForm();
                }
            } else {
                alert("Please enter a reason for closure.");
                reason.focus();
            }
        }
    </script>
</body>
</html>





